[gcode_macro PROBE_Z_ORIGIN]
gcode:
  G90
  G28
  PROBE
  {% set probed_z = printer.probe.last_z_result|float - printer.configfile.settings['probe'].z_offset|float %}
  G0 Z{probed_z}
  Z_ORIGIN